<!DOCTYPE html>
<html lang="en">
<head>
  <title>Vert.x gRPC - Vert.x</title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <meta content="Eclipse Vert.x is a tool-kit for building reactive applications on the JVM." name="description">
  <link href="https://vertx.tk/stylesheets/docs.css" media="screen" rel="stylesheet">
  <link href="https://vertx.tk/stylesheets/font-awesome.min.css" media="screen" rel="stylesheet">
  <link href="https://vertx.tk/javascripts/styles/rainbow.min.css" media="screen" rel="stylesheet">
  <!-- IE 6-8 support of HTML 5 elements -->
  <!--[if lt IE 9]>
  <script src="http://static.jboss.org/theme/js/libs/html5/pre3.6/html5.min.js"></script>
  <![endif]-->

  <link rel="apple-touch-icon" sizes="57x57" href="https://vertx.tk/assets/favicons/vertx-favicon-7/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="https://vertx.tk/assets/favicons/vertx-favicon-7/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="https://vertx.tk/assets/favicons/vertx-favicon-7/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="https://vertx.tk/assets/favicons/vertx-favicon-7/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="https://vertx.tk/assets/favicons/vertx-favicon-7/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="https://vertx.tk/assets/favicons/vertx-favicon-7/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="https://vertx.tk/assets/favicons/vertx-favicon-7/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="https://vertx.tk/assets/favicons/vertx-favicon-7/apple-touch-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="https://vertx.tk/assets/favicons/vertx-favicon-7/apple-touch-icon-180x180.png">
  <link rel="icon" type="image/png" href="https://vertx.tk/assets/favicons/vertx-favicon-7/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="https://vertx.tk/assets/favicons/vertx-favicon-7/android-chrome-192x192.png" sizes="192x192">
  <link rel="icon" type="image/png" href="https://vertx.tk/assets/favicons/vertx-favicon-7/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="https://vertx.tk/assets/favicons/vertx-favicon-7/favicon-16x16.png" sizes="16x16">
  <link rel="manifest" href="https://vertx.tk/assets/favicons/vertx-favicon-7/manifest.json">
  <link rel="mask-icon" href="https://vertx.tk/assets/favicons/vertx-favicon-7/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#7d3194">
  <meta name="msapplication-TileImage" content="https://vertx.tk/assets/favicons/vertx-favicon-7/mstile-144x144.png">
  <meta name="theme-color" content="#ffffff">

  <link href="https://fonts.googleapis.com/css?family=Ubuntu:400,500,700,400italic" rel="stylesheet" type="text/css">
  <link rel="alternate" type="application/rss+xml" title="RSS"
     href="https://vertx.tk/feed.xml">
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-30144458-1', 'auto');
    ga('create', 'UA-71153120-1', 'auto', 'tracker');
    ga('send', 'pageview');
    ga('tracker.send', 'pageview');
  </script>
  <style>
    .page-link-to-github {
      position: relative;
      z-index: 1;
      display: inline-block;
      border: 1px solid #782B90;
      border-radius: 5px;
      color: #782B90;
      font-size: 12px;
      padding: 4px 10px;
      text-decoration: none;
      background-color: #ffffff;
    }
    .page-link-to-github:hover {
      color: #ffffff;
      border-color: #ffffff;
      background-color: #782B90;
    }

    .page-link-to-github .github-icon {
      position: absolute;
      display: inline-block;
      width: 20px;
      height: 20px;
      /*background-position: -50px 0*/
      background: url('https://vertx.tk/assets/github.png') no-repeat 0 0;
    }

    @media (-webkit-min-device-pixel-ratio: 2),(min-resolution:192dpi) {
      .page-link-to-github .github-icon {
        background-image:url('https://vertx.tk/assets/github@2x.png');
        background-size: 150px auto
      }
    }

    .page-link-to-github:hover .github-icon {
      /*background-position: 0 0*/
      background-position: -100px 0
    }
    .text {
      text-decoration: underline
    }
    .page-link-to-github .text {
      padding-left: 27px
    }
    .text {
      padding-right: 8px
    }
    .page-link-to-github {
      float: right;
      top: 4px
    }

  </style>
</head>
<body>

<a href="http://www.reactivemanifesto.org/" id="reactive-manifesto-banner">
  <img style="border: 0; position: fixed; right: 0; top:0; z-index: 9000"
    src="https://d379ifj7s9wntv.cloudfront.net/reactivemanifesto/images/ribbons/we-are-reactive-black-right.png">
</a>

<a id="skippy" class="sr-only sr-only-focusable" href="#content"><div class="container"><span class="skiplink-text">Skip to main content</span></div></a>

<header class="navbar navbar-default navbar-static-top" id="top" role="banner">
  <div class="container">
    <div class="navbar-header">
      <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#vertx-navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a href="https://vertx.tk/" class="navbar-brand"><img alt="Brand" src="https://vertx.tk/assets/logo-sm.png"></a>
    </div>
    <nav class="collapse navbar-collapse" id="vertx-navbar-collapse">
      <ul class="nav navbar-nav navbar-right">
        <li><a href="http://start.vertx.io">Starter</a></li>
        <li><a href="https://vertx.io">官网</a></li>
        <li><a href="https://vertx.tk/download/">下载</a></li>
        <li><a href="https://vertx.tk/docs/">文档</a></li>
        <li><a href="https://github.com/vert-x3/wiki/wiki">维基</a></li>
        <li><a href="https://vertx.tk/community/">社区</a></li>
        <li><a href="https://vertx.tk/materials/">资料</a></li>
        <li><a href="https://vertx.tk/blog/">博客</a></li>
      </ul>
    </nav>
  </div>
</header>



  <div class="page-header" id="content">
    <div class="container">
      <div class="row">
        <div class="col-sm-12">
          <h1>Vert.x gRPC</h1>
          
        </div>
      </div>
    </div>
  </div>



<div id="content">
  <div class="container docs-content">
    <div class="row">
      <div class="col-sm-12 col-md-push-9 col-md-3 hidden-xs hidden-sm">
        <div id="sidebar" data-spy="affix">
          <ul class="sectlevel1">
<li><a href="#_grpc_types">gRPC types</a></li>
<li><a href="#_a_simple_hello_world">A simple Hello World</a>
<ul class="sectlevel2">
<li><a href="#_compile_the_rpc_definition">Compile the RPC definition</a></li>
<li><a href="#_grpc_server">gRPC Server</a></li>
<li><a href="#_grpc_client">gRPC Client</a></li>
</ul>
</li>
<li><a href="#_advanced_configuration">Advanced configuration</a></li>
<li><a href="#_native_transports">Native transports</a></li>
</ul>
        </div>
      </div>
      <div class="col-sm-12 col-md-pull-3 col-md-9">
        <div class="toc hidden-md hidden-lg">
          <h2>Table of Contents</h2>
          <ul class="sectlevel1">
<li><a href="#_grpc_types">gRPC types</a></li>
<li><a href="#_a_simple_hello_world">A simple Hello World</a>
<ul class="sectlevel2">
<li><a href="#_compile_the_rpc_definition">Compile the RPC definition</a></li>
<li><a href="#_grpc_server">gRPC Server</a></li>
<li><a href="#_grpc_client">gRPC Client</a></li>
</ul>
</li>
<li><a href="#_advanced_configuration">Advanced configuration</a></li>
<li><a href="#_native_transports">Native transports</a></li>
</ul>
        </div>

  <a href="https://github.com/okou19900722/vertx-web-site-translation-chinese/tree/master/vertx-translation-stack/vertx-grpc-translation"
     class="page-link-to-github"
     target="_blank"
     title="Edit this page on GitHub">
    <i class="github-icon"></i>
    <span class="text">编辑本页</span>
  </a>

        <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The best description of gRPC can be seen at wikipedia.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>gRPC is an open source remote procedure call (RPC) system initially developed at Google. It uses HTTP/2 for
transport, Protocol Buffers as the interface description language, and provides features such as authentication,
bidirectional streaming and flow control, blocking or nonblocking bindings, and cancellation and timeouts. It
generates cross-platform client and server bindings for many languages.</p>
</div>
</blockquote>
<div class="attribution">
&#8212; wikipedia<br>
<cite>wikipedia</cite>
</div>
</div>
<div class="paragraph">
<p>Vert.x gRPC is a module that will align the programming style of Google gRPC with Vert.x style. As a user of this
module you will be more familiar with the code style using Vert.x Streams and Futures while benefiting from all the
benefits of gRPC.</p>
</div>
<div class="paragraph">
<p>For more information related to gRPC please consult the official documentation site <a href="http://www.grpc.io/" class="bare">http://www.grpc.io/</a>.</p>
</div>
<div class="paragraph">
<p>In addition Vert.x gRPC supports</p>
</div>
<div class="ulist">
<ul>
<li>
<p>gRPC service scaling with Verticles</p>
</li>
<li>
<p>non-blocking native transports</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_grpc_types">gRPC types</h2>
<div class="sectionbody">
<div class="paragraph">
<p>With gRPC you benefit from HTTP/2 which means that you will have asynchronous streaming support which means that your
Remote Procedure Calls can have the following characteristics:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Client streams request objects while Server replies with a single response object</p>
</li>
<li>
<p>Client streams request objects while Server replies with a stream of response objects</p>
</li>
<li>
<p>Client sends a single request object while Server replies with a single response object</p>
</li>
<li>
<p>Client sends a single request object while Server replies with a stream of response objects</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>While to the untrained eye this might not look to different from other HTTP based RPC approaches you should be aware
that with HTTP/2 your requests do not need to complete before the responses start to arrive. This means that your
communication channel is full duplex. Being full duplex allows you to reduce the response latency and make more
response application.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_a_simple_hello_world">A simple Hello World</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In order to start with your first hello world example, one needs to define the protocol. gRPC requires you to define
this protocol using the <code>protobuffer</code> format.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-proto" data-lang="proto">syntax = "proto3";

option java_multiple_files = true;
option java_package = "examples";
option java_outer_classname = "HelloWorldProto";
package helloworld;

// The greeting service definition.
service Greeter {
 // Sends a greeting
 rpc SayHello (HelloRequest) returns (HelloReply) {}
}

// The request message containing the user's name.
message HelloRequest {
 string name = 1;
}

// The response message containing the greetings
message HelloReply {
 string message = 1;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is a very simple example showing the single request, single response mode.</p>
</div>
<div class="sect2">
<h3 id="_compile_the_rpc_definition">Compile the RPC definition</h3>
<div class="paragraph">
<p>Using the definition above we need to compile it.</p>
</div>
<div class="paragraph">
<p>You can compile the proto file using the <code>protoc</code> compiler if you <a href="https://github.com/google/protobuf/tree/master/java#installation---without-maven">like</a>
or you can integrate it in your build.</p>
</div>
<div class="paragraph">
<p>If you&#8217;re using Apache Maven you need to add the plugin:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;plugin&gt;
 &lt;groupId&gt;org.xolstice.maven.plugins&lt;/groupId&gt;
 &lt;artifactId&gt;protobuf-maven-plugin&lt;/artifactId&gt;
 &lt;version&gt;0.5.0&lt;/version&gt;
 &lt;configuration&gt;
   &lt;protocArtifact&gt;com.google.protobuf:protoc:3.2.0:exe:${os.detected.classifier}&lt;/protocArtifact&gt;
   &lt;pluginId&gt;grpc-java&lt;/pluginId&gt;
   &lt;pluginArtifact&gt;io.vertx:protoc-gen-grpc-java:${vertx.grpc.version}:exe:${os.detected.classifier}&lt;/pluginArtifact&gt;
 &lt;/configuration&gt;
 &lt;executions&gt;
   &lt;execution&gt;
     &lt;id&gt;compile&lt;/id&gt;
     &lt;configuration&gt;
       &lt;outputDirectory&gt;${project.basedir}/src/main/java&lt;/outputDirectory&gt;
       &lt;clearOutputDirectory&gt;false&lt;/clearOutputDirectory&gt;
     &lt;/configuration&gt;
     &lt;goals&gt;
       &lt;goal&gt;compile&lt;/goal&gt;
       &lt;goal&gt;compile-custom&lt;/goal&gt;
     &lt;/goals&gt;
   &lt;/execution&gt;
   &lt;execution&gt;
     &lt;id&gt;test-compile&lt;/id&gt;
     &lt;goals&gt;
       &lt;goal&gt;test-compile&lt;/goal&gt;
       &lt;goal&gt;test-compile-custom&lt;/goal&gt;
     &lt;/goals&gt;
   &lt;/execution&gt;
 &lt;/executions&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>${os.detected.classifier}</code> property is used to make the build OS independant, on OSX it is replaced
by <em>osx-x86_64</em> and so on. To use it you need to add the os-maven-plugin[<a href="https://github.com/trustin/os-maven-plugin" class="bare">https://github.com/trustin/os-maven-plugin</a>]
in the <code>build</code> section of your <code>pom.xml</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;build&gt;
 ...
 &lt;extensions&gt;
   &lt;extension&gt;
     &lt;groupId&gt;kr.motd.maven&lt;/groupId&gt;
     &lt;artifactId&gt;os-maven-plugin&lt;/artifactId&gt;
     &lt;version&gt;1.4.1.Final&lt;/version&gt;
   &lt;/extension&gt;
 &lt;/extensions&gt;
 ...
&lt;/build&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This plugin will compile your proto files under <code>src/main/proto</code> and make them available to your project.</p>
</div>
<div class="paragraph">
<p>If you&#8217;re using Gradle you need to add the plugin:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">...
apply plugin: 'com.google.protobuf'
...
buildscript {
 ...
 dependencies {
   // ASSUMES GRADLE 2.12 OR HIGHER. Use plugin version 0.7.5 with earlier gradle versions
   classpath 'com.google.protobuf:protobuf-gradle-plugin:0.8.0'
 }
}
...
protobuf {
 protoc {
   artifact = 'com.google.protobuf:protoc:3.2.0'
 }
 plugins {
 grpc {
   artifact = "io.vertx:protoc-gen-grpc-java:${vertx.grpc.version}"
 }
}
 generateProtoTasks {
   all()*.plugins {
     grpc
   }
 }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This plugin will compile your proto files under <code>build/generated/source/proto/main</code> and make them available to your project.</p>
</div>
</div>
<div class="sect2">
<h3 id="_grpc_server">gRPC Server</h3>
<div class="paragraph">
<p>Now you should have your RPC base code setup it is time to implement your server. As you should recall from above we
described that our server should implement a <code>sayHello</code> method that receives a <code>HelloRequest</code> objects and returns a
<code>HelloReply</code> object. So you can implement it as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">GreeterGrpc.GreeterVertxImplBase service = new GreeterGrpc.GreeterVertxImplBase() {
  @Override
  public void sayHello(HelloRequest request, Future&lt;HelloReply&gt; future) {
    future.complete(HelloReply.newBuilder().setMessage(request.getName()).build());
  }
};</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once you&#8217;re happy with it you can then make your service available on a server. Vert.x makes the creation of a server
quite simple all you need to add is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">VertxServer rpcServer = VertxServerBuilder
  .forAddress(vertx, "my.host", 8080)
  .addService(service)
  .build();

// Start is asynchronous
rpcServer.start();</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_ssl_configuration">SSL configuration</h4>
<div class="paragraph">
<p>The previous example was simple but your RPC is not secure. In order to make it secure we should enable SSL/TLS:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">VertxServerBuilder builder = VertxServerBuilder.forPort(vertx, 8080)
    .useSsl(options -&gt; options
        .setSsl(true)
        .setUseAlpn(true)
        .setKeyStoreOptions(new JksOptions()
            .setPath("server-keystore.jks")
            .setPassword("secret")));</code></pre>
</div>
</div>
<div class="paragraph">
<p>Congratulations you just completed your first gRPC server.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
since gRPC uses HTTP/2 transport, SSL/TLS setup requires the
<a href="https://wikipedia.org/wiki/Application-Layer_Protocol_Negotiation">Application-Layer Protocol Negotiation</a>
in your server
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_server_scaling">Server scaling</h4>
<div class="paragraph">
<p>When you deploy several instances of the same verticles, the gRPC server will be scaled
on the verticle event-loops.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">vertx.deployVerticle(

  // Verticle supplier - should be called 4 times
  () -&gt; new AbstractVerticle() {

    BindableService service = new GreeterGrpc.GreeterVertxImplBase() {
      @Override
      public void sayHello(HelloRequest request, Future&lt;HelloReply&gt; future) {
        future.complete(HelloReply.newBuilder().setMessage(request.getName()).build());
      }
    };

    @Override
    public void start() throws Exception {
      VertxServerBuilder
        .forAddress(vertx, "my.host", 8080)
        .addService(service)
        .build()
        .start();
    }
  },

  // Deploy 4 instances, i.e the service is scaled on 4 event-loops
  new DeploymentOptions()
    .setInstances(4));</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_blockingserverinterceptor">BlockingServerInterceptor</h4>
<div class="paragraph">
<p>gRPC <a href="https://grpc.io/grpc-java/javadoc/io/grpc/ServerInterceptor.html">ServerInterceptor</a> is a mechanism
for intercepting incoming calls before they are sent to the service.
It has synchronous behavior and will be execute on the Vert.x event loop.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">VertxServer rpcServer = VertxServerBuilder
  .forAddress(vertx, "my.host", 8080)
  .addService(ServerInterceptors.intercept(service, myInterceptor))
  .build();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Suppose we have an interceptor that does something blocking the event loop:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">class MyInterceptor implements ServerInterceptor {
  @Override
  public &lt;Q, A&gt; ServerCall.Listener&lt;Q&gt; interceptCall(
    ServerCall&lt;Q, A&gt; call, Metadata headers, ServerCallHandler&lt;Q, A&gt; next) {
    // do something hard and update the metadata, for example
    return next.startCall(call, headers);
  }
}
MyInterceptor myInterceptor = new MyInterceptor();</code></pre>
</div>
</div>
<div class="paragraph">
<p>To avoid the blocking one should wrap the interceptor. Then it will be called on the Vert.x worker thread.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">ServerInterceptor wrapped = BlockingServerInterceptor.wrap(vertx, myInterceptor);

// Create the server
VertxServer rpcServer = VertxServerBuilder
  .forAddress(vertx, "my.host", 8080)
  .addService(ServerInterceptors.intercept(service, wrapped))
  .build();

// Start it
rpcServer.start();</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_grpc_client">gRPC Client</h3>
<div class="paragraph">
<p>A server without a client is of no use, so lets create a client. In order to do this some steps overlap with the
server. First we need to have the RPC definition, which should already done otherwise there would be no server and
the same definition should have been compiled.</p>
</div>
<div class="paragraph">
<p>Note that the compiler will always generate both the base server and a client stub so if you already compiled once
you do not need to re-compile it again.</p>
</div>
<div class="paragraph">
<p>Every client stub will always require a communication channel to a server so first we need to create a gRPC channel:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">ManagedChannel channel = VertxChannelBuilder
  .forAddress(vertx, "localhost", 8080)
  .usePlaintext(true)
  .build();

// Get a stub to use for interacting with the remote service
GreeterGrpc.GreeterVertxStub stub = GreeterGrpc.newVertxStub(channel);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once the stub is created we can communicate with our server, this time it is easier since the stub already provides
the correct method definition and parameter types:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">HelloRequest request = HelloRequest.newBuilder().setName("Julien").build();

// Call the remote service
stub.sayHello(request, ar -&gt; {
  if (ar.succeeded()) {
    System.out.println("Got the server response: " + ar.result().getMessage());
  } else {
    System.out.println("Coult not reach server " + ar.cause().getMessage());
  }
});</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_ssl_configuration_2">SSL configuration</h4>
<div class="paragraph">
<p>If you enabled SSL previously your client will also require SSL, in order to do this we need to configure the channel:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">ManagedChannel channel = VertxChannelBuilder.
    forAddress(vertx, "localhost", 8080)
    .useSsl(options -&gt; options
        .setSsl(true)
        .setUseAlpn(true)
        .setTrustStoreOptions(new JksOptions()
            .setPath("client-truststore.jks")
            .setPassword("secret")))
    .build();</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
since gRPC uses HTTP/2 transport, SSL/TLS setup requires the
<a href="https://wikipedia.org/wiki/Application-Layer_Protocol_Negotiation">Application-Layer Protocol Negotiation</a>
in your client
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_advanced_configuration">Advanced configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Until now all gRPC examples where using sensible defaults but there is more, if you need to have full control over
the server configuration you should refer to the documentation: <code><a href="../../apidocs/io/vertx/grpc/VertxServerBuilder.html">VertxServerBuilder</a></code>, or if you
need to control your client channel <code><a href="../../apidocs/io/vertx/grpc/VertxChannelBuilder.html">VertxChannelBuilder</a></code>. Vert.x gRPC extends the grpc-java
project (Netty transport) and therefore reading its <a href="http://www.grpc.io/grpc-java/javadoc/">documentation</a> is
recommended.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_native_transports">Native transports</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The client and server can be deployed with Netty&#8217;s native transports, this is achieved when
creating the Vert.x instance.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Vertx.vertx(new VertxOptions().setPreferNativeTransport(true));</code></pre>
</div>
</div>
<div class="paragraph">
<p>Please refer Vert.x Core documentation for more information about native transports.</p>
</div>
</div>
</div>
        

        
          <div id="footer">
            <div id="footer-text">
              
                上次更新时间 2018-12-28 15:23:09 CST
              
              
            </div>
          </div>
        
      </div>
    </div>
  </div>
</div>

<footer>
  <div class="container">
    <div class="row">
      <div class="col-xs-4 col-sm-4 col-md-2 col-lg-2">
        <h2>Eclipse Vert.x</h2>
        <ul class="list-unstyled">
          <li><a href="https://vertx.tk/">主页</a></li>
          <li><a href="https://vertx.tk/download/">下载</a></li>
          <li><a href="https://vertx.tk/docs/">文档</a></li>
          <li><a href="https://github.com/vert-x3/wiki/wiki">维基</a></li>
          <li><a href="https://vertx.tk/blog/">博客</a></li>
        </ul>
      </div>
      <div class="col-xs-4 col-sm-4 col-md-2 col-lg-2">
        <h2>Community</h2>
        <ul class="list-unstyled">
          <li><a href="https://vertx.tk/community/">帮助 &amp; 贡献者</a></li>
          <li><a href="https://vertx.tk/materials/">学习资料</a></li>
          <li><a href="https://groups.google.com/forum/?fromgroups#!forum/vertx">User Group</a></li>
          <li><a href="https://groups.google.com/forum/?fromgroups#!forum/vertx-dev">Developer Group</a></li>
          <li><a href="//shang.qq.com/wpa/qunwpa?idkey=587f58cacb9557e3291b46098e0fe09427b98a1c0f866da23c04c2762bc7e2ad">QQ群</a></li>
        </ul>
      </div>
      <div class="col-xs-4 col-sm-4 col-md-2 col-lg-2">
        <h2>Eclipse</h2>
        <ul class="list-unstyled">
          <li><a href="http://www.eclipse.org/">Eclipse Foundation</a></li>
          <li><a href="https://eclipse.org/legal/privacy.php">Privacy Policy</a></li>
          <li><a href="https://eclipse.org/legal/termsofuse.php">Terms of Use</a></li>
          <li><a href="https://eclipse.org/legal/copyright.php">Copyright Agent</a></li>
          <li><a href="http://www.eclipse.org/legal">Legal Resources</a></li>
        </ul>
      </div>

      <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 copyright">
        <p>Eclipse Vert.x is open source and dual-licensed under the <a href="http://www.eclipse.org/legal/epl-v20.html">Eclipse Public License 2.0</a> and <a href="https://www.apache.org/licenses/LICENSE-2.0.html">Apache License 2.0</a>.</p>
        <p>This website is licensed under the <a href="http://creativecommons.org/licenses/by-sa/3.0/">CC BY-SA 3.0 License</a>.<br>
        Design by <a href="https://www.michel-kraemer.com">Michel Kr&auml;mer</a>.</p>
        <div class="row">
          <div class="col-sm-12 col-md-5 col-md-offset-1 col-lg-offset-2">
            <a href="http://eclipse.org">
            <img class="logo eclipse-logo" src="https://vertx.tk/assets/eclipse_logo_grey_small.png" width="204" height="48">
            </a>
          </div>
          <div class="col-sm-12 col-md-5 col-md-offset-1 col-lg-offset-0">
            <a href="http://cloudbees.com">
            <img class="logo cloudbees-logo" src="https://vertx.tk/assets/Button-Built-on-CB-1-grey.png" width="180" height="48">
           </a>
          </div>
          <div class="col-sm-12 col-md-5 col-md-offset-7 jprofiler">
            <a href="http://www.ej-technologies.com/products/jprofiler/overview.html"
            style="text-decoration:none">
            <img class="logo jprofiler-logo" src="https://vertx.tk/assets/jprofiler-logo.png" width="48" height="48"><span class="jprofiler-logo">&nbsp; JPROFILER</span>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="https://vertx.tk/javascripts/bootstrap.min.js"></script>
<script src="https://vertx.tk/javascripts/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>



<script src="https://vertx.tk/javascripts/sidebar.js"></script>


<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#64386b",
      "text": "#ffcdfd"
    },
    "button": {
      "background": "transparent",
      "text": "#f8a8ff",
      "border": "#f8a8ff"
    }
  },
  "content": {
    "message": "This website uses anonymous cookies to ensure we provide you the best experience. ",
    "link": "Opt out!",
    "href": "https://tools.google.com/dlpage/gaoptout/"
  }
})});
</script>
</body>
</html>

